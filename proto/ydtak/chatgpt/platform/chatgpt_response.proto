syntax = "proto3";

package ydtak.chatgpt.platform;

// See https://linter.aip.dev/rules/.
// (-- api-linter: core::0123=disabled --)
// (-- api-linter: core::0191::proto-package=disabled --)
// (-- api-linter: core::0215=disabled --)

option java_multiple_files = true;
option java_outer_classname = "ChatGptResponseProto";
option java_package = "ydtak.chatgpt.platform";

// Encapsulates properties for a ChatGPT API response. See
// https://platform.openai.com/docs/api-reference/chat/create.
message ChatGptResponse {

  // A unique identifier for the chat completion.
  string id = 1;

  // A list of chat completion choices. Can be more than one if n is greater
  // than 1.
  repeated Choice choices = 2;

  message Choice {
    // The reason the model stopped generating tokens. This will be stop if the
    // model hit a natural stop point or a provided stop sequence, length if the
    // maximum number of tokens specified in the request was reached,
    // content_filter if content was omitted due to a flag from our content
    // filters, or function_call if the model called a function.
    string finish_reason = 1;

    // The index of the choice in the list of choices.
    int32 index = 2;

    // A chat completion message generated by the model.
    Message message = 3;

    message Message {

      // The contents of the message.
      string content = 1;

      // The role of the author of this message.
      string role = 2;
    }
  }

  // The Unix timestamp (in seconds) of when the chat completion was created.
  int32 created = 3;

  // The model used for the chat completion.
  string model = 4;

  // The object type, which is always chat.completion.
  string object = 5;

  // Usage statistics for the completion request.
  Usage usage = 6;

  message Usage {
    // Number of tokens in the generated completion.
    int32 completion_tokens = 1;

    // Number of tokens in the prompt.
    int32 prompt_tokens = 2;

    // Total number of tokens used in the request (prompt + completion).
    int32 total_tokens = 3;
  }
}